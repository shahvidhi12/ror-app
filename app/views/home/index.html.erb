<h1 class="mb-4">Authors, Categories, and Books</h1>
<div class="table-responsive">
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Category Status</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Age</th>
        <th>Country</th>
        <th>Email</th>
        <th>Birthdate</th>
        <th>Books</th>
        <th>Actions</th>
      </tr>
      <tr>
        <th>Categories: <%= @categories.count %></th>
        <th colspan="7"></th> 
      </tr>
    </thead>
    <tbody>
      <% @categories.each do |category| %>
        <% category.authors.each do |author| %>
          <tr>
            <td><%= category.status %></td>
            <td><%= link_to author.name, category_author_path(category, author) %></td>
            <td><%= author.last_name %></td>
            <td><%= author.age %></td>
            <td><%= author.country %></td>
            <td><%= author.email %></td>
            <td><%= author.date.strftime("%d/%m/%Y") if author.date.present? %></td>
            <td>
              <% if author.books.any? %>
                <ul class="list-unstyled">
                  <% author.books.each do |book| %>
                    <li><%= book.title %></li>
                  <% end %>
                </ul>
              <% else %>
                No books available
              <% end %>
            </td>
            <td>
              <ul class="list-inline">
                <li class="list-inline-item"><%= link_to "Edit", edit_category_author_path(category, author), class: "btn btn-warning btn-sm" %></li>
                <li class="list-inline-item"><%= link_to "Destroy", category_author_path(category, author), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-danger btn-sm" %></li>
              </ul>
            </td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
